<!--
 * @Author: shaohang-shy
 * @Date: 2022-08-10 18:57:59
 * @LastEditors: shaohang-shy
 * @LastEditTime: 2022-08-11 09:23:50
 * @Description: index page
-->
<script setup lang="ts">
import { Blockquote, Bold, BulletList, Code, CodeBlockLowlight, Color, CustomCommands, Document, Dropcursor, Emphasis, Focus, FontFamily, FormatClear, Fullscreen, Gapcursor, GuoduTiptap, Heading, Highlight, History, HorizontalRule, Image, ImportWord, Indent, Italic, LineHeight, Link, Mathematics, OrderedList, Paragraph, Strike, Subscript, Superscript, Table, TaskList, Text, TextAlign, Underline } from '~/index'

const extensions = [
  Document.configure({ title: false }),
  FontFamily,
  LineHeight,
  TextAlign.configure({
    types: ['heading', 'paragraph'],
  }),
  Color,
  CodeBlockLowlight,
  Indent,
  Mathematics,
  Paragraph,
  Image,
  Table,
  Gapcursor,
  Dropcursor,
  Focus,
  FormatClear,
  Fullscreen,
  CustomCommands,
  Text,
  BulletList,
  OrderedList,
  TaskList,
  Blockquote,
  HorizontalRule,
  ImportWord,
  History,
  Link.configure({ bubble: true }),
  Highlight.configure({ bubble: true }),
  Heading.configure({ levels: [1, 2, 3] }),
  Bold.configure({ bubble: true }),
  Code.configure({ bubble: true }),
  Emphasis,
  Italic.configure({ bubble: true }),
  Strike.configure({ bubble: true }),
  Subscript,
  Superscript,
  Underline,
]

const content = ref('<h1 style="text-align: center">Welcome to `guodu-tiptap`</h1><p><code>guodu-tiptap</code> A WYSIWYG rich-text editor using <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/ueberdosis/tiptap">tiptap</a>.</p><p>Math: <span data-katex="true">$$\\ce{Hg^2+ -&gt;[I-]  $\\underset{\\mathrm{red}}{\\ce{HgI2}}$  -&gt;[I-]  $\\underset{\\mathrm{red}}{\\ce{[Hg^{II}I4]^2-}}$}$$</span></p><p data-indent="2"><span><span style="text-emphasis:dot;-webkit-text-emphasis:dot;-webkit-text-emphasis-position: under;text-emphasis-position: under;">åœ¨ä¸€ä¸ªæ¼†é»‘</span></span>çš„å¤œæ™šï¼Œ<span style="color: #ff5722"><mark data-color="#2196f3" style="background-color: #2196f3; color: inherit"><em>ä¸€åªé¥¿æäº†çš„å°è€é¼ </em></mark></span><span style="font-family: æ¥·ä½“">é¬¼é¬¼ç¥Ÿç¥Ÿçˆ¬å‡ºæ´å£ï¼Œå·å·æ‘¸æ‘¸ã€æ‘„æ‰‹æ‘„è„šåœ°æ¥åˆ°äº†ä¸€ä¸ªä¸»äººçš„ä¹¦æˆ¿ï¼Œè·³åˆ°äº†ç”µè„‘æ¡Œå­ä¸Šï¼Œå‡†å¤‡å·åƒç”µè„‘æ¡Œå­ä¸Šçš„å‡ é¢—èŠ±ç”Ÿç±³ï¼Œç»“æœä¸å°å¿ƒè§¦ç¢°åˆ°äº†ç”µè„‘é¼ æ ‡ï¼Œçªç„¶ä¸€å¼ å·¨å¤§çš„çš„çŒ«è„¸å‡ºç°åœ¨äº†ç”µè„‘å±å¹•ä¸Šï¼Œå®ƒæœ‰ç€å°–å°–ã€è‚¥è‚¥çš„è€³æœµï¼Œåœ†æºœæºœã€äº®æ™¶æ™¶çš„çœ¼ç›ï¼Œä¸€å¼ é¾‡ç‰™å’§å˜´ã€å¼ ç‰™èˆçˆªçš„å‡¶è„¸ï¼Œä¸¤æ—è¿˜æœ‰å‡ æ ¹åˆé•¿åˆç™½ä¸”ç«–èµ·æ¥äº†çš„èƒ¡é¡»ï¼Œè„šåº•ä¸‹å››åª</span><span style="font-family: æ¥·ä½“; color: rgb(255, 0, 0)">çˆªå­éå¸¸é”‹</span><span style="font-family: æ¥·ä½“">åˆ©ï¼Œåƒè¦é©¬ä¸ŠæŠ“åˆ°ä½ äº†ã€‚</span></p><p data-indent="2"><span style="font-family: æ¥·ä½“">å°è€é¼ å“å¾—é­‚é£é­„æ•£ã€æƒŠæ…Œå¤±æªï¼ŒåŒè„šåœ¨ç”µè„‘æ¡Œå­ä¸Šè·³äº†èµ·æ¥ï¼Œä¸€æ‰‹å‰ä¸€æ‰‹åçš„ï¼Œæƒ³è·‘å›è€é¼ æ´é‡Œã€‚<strong>å½“å®ƒå‡†å¤‡é€ƒè·‘</strong>çš„æ—¶å€™ï¼Œä¸å°å¿ƒ</span><span style="font-family: æ¥·ä½“"><span style="text-emphasis:dot;-webkit-text-emphasis:dot;-webkit-text-emphasis-position: under;text-emphasis-position: under;">åˆä¸€æ¬¡è§¦ç¢°åˆ°äº†ç”µ</span></span><span style="font-family: æ¥·ä½“">è„‘é¼ æ ‡ï¼Œé‚£å¼ å¤§çŒ«è„¸çªç„¶æ¶ˆå¤±äº†ã€‚å°è€é¼ å¿ƒé‡Œå’¯å™”äº†ä¸€ä¸‹ï¼šâ€œå“å‘€ï¼åŸæ¥æ˜¯è™šæƒŠä¸€åœºâ€ã€‚å®ƒè®¤ä¸ºæ˜¯è‡ªå·±æ‰“è´¥äº†é‚£åªå¤§çŒ«ï¼Œä¸ç”±å¾—æ²¾æ²¾è‡ªå–œã€‚</span></p><h2>ğŸš€ Features<img src="https://shy-nav.shaohang.xin/nav-icons/github.svg" data-display="right"></h2><ul><li><p>Many Extensions</p></li><li><p>Markdown support</p></li><li><p>Using TypeScript</p></li></ul><h2>ğŸ”¥ Extensions</h2><h3>Marks</h3><ul><li><p>bold</p></li><li><p>code</p></li><li><p>emphasis</p></li><li><p>highlight</p></li><li><p>italic</p></li><li><p>link</p></li><li><p>strike</p></li><li><p>subscript</p></li><li><p>superscript</p></li><li><p>underline</p></li></ul><h3>nodes</h3><ul><li><p>blockquote</p></li><li><p>bullet-list</p></li><li><p>ordered-list</p></li><li><p>task-list</p></li><li><p>code-block-lowlight</p></li><li><p>heading</p></li><li><p>horizontal-rule</p></li><li><p>image</p></li><li><p>table</p></li><li><p>title</p></li></ul><h3>Other</h3><ul><li><p>color</p></li><li><p>commands</p></li><li><p>document</p></li><li><p>dropcursor</p></li><li><p>focus</p></li><li><p>format-clear</p></li><li><p>fullscreen</p></li><li><p>gapcursor</p></li><li><p>history</p></li><li><p>import-word</p></li><li><p>placeholder</p></li><li><p>text-align</p></li></ul><p></p><blockquote><p>è®©æ•™è‚²åƒç³–æœï¼Œè®©å­¦ä¹ æœ‰ç”œåº¦ã€‚</p><p>Let education be like candy and make learning sweet.</p></blockquote>')

const theme = computed(() => {
  return isDark.value ? 'dark' : 'light'
})
const editorRef = ref()
function logEditorRef() {
  // eslint-disable-next-line no-console
  console.log(editorRef.value.editor)
}
const showLineNo = ref(false)
function importWord() {
  editorRef.value.editor.commands.importWord(editorRef.value.editor)
}
</script>

<template>
  <div class="mx-auto container">
    <div class="flex items-center justify-start gap-3">
      <h2>Welcome to <code>`guodu-tiptap`</code></h2>
      <div icon-btn @click="toggleDark()">
        <div dark:i-carbon-moon i-carbon-sun />
      </div>

      <a
        i-carbon-logo-github icon-btn rel="noreferrer" href="https://github.com/shy1118999/guodu-tiptap" target="_blank"
        title="GitHub"
      />
      <button @click="logEditorRef">
        Log Editor Instance
      </button>
      <button @click="showLineNo = !showLineNo">
        æ˜¾ç¤º/éšè—è¡Œå·
      </button>
      <button @click="importWord">
        import word
      </button>
    </div>
    <GuoduTiptap ref="editorRef" v-model:content="content" :show-line-no="showLineNo" :extensions="extensions" :theme="theme" />
  </div>
</template>

<style lang="scss" scoped>
:deep(.guodu-tiptap-menu-bar) {
  /* æ»‘åŠ¨å›ºå®šåœ¨ä¸Šæ–¹ */
  position: sticky;
  top: 0;
}
</style>
